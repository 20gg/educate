<!DOCTYPE>
<html>
  <head>
    <title>到答课堂</title>
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	 <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
    <meta http-equiv="keywords" content="keyword1,keyword2,keyword3">
    <meta http-equiv="description" content="this is my page">
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    
  
    
    <link rel="stylesheet" href="../../../css/touxiang.css"/>
    <link rel="stylesheet" href="../../../css/wx/video/bf_order.css" type="text/css">
    <link rel="stylesheet" href="../../../css/wx/video/af_order.css" type="text/css">
<link rel="stylesheet" href="../../../js/qq_video/video.css?v=1" />
	 <script src="https://qzonestyle.gtimg.cn/open/qcloud/video/h5/h5connect.js" charset="utf-8"></script>
		
  </head>
  <style type="text/css">
   .load_tc_back{
  width:100%;
	height: 100%;
	position: fixed;
	 
	top:0px;
	left: 0px;
	z-index: 10001;
	overflow:hidden;
	background:rgba(0,0,0,0.6);
  
  }
  html,body{
  width: 100%;
  margin: 0px;
  padding:0px;
  background:#fff;
  
  overflow-x:hidden; 
  }
  

.tc_ts_div_sure {
	width: 100px; height: 30px;  border:0px;background-color: #fff;color:#2CC159;
			    font-size: 16px;  
}
.tc_ts_div_sure2 {
	width: 110px; height: 30px;  border:0px;background-color: #2CC159;color:#fff;
			    font-size: 13px;margin-left: 40px;
}

 
  
  </style>
  
  <body >
  	
   
		
  <!--播放器 封装  -->
   <div  class="vodeo_box">
   		<!-- qq_播放器 -->
   		<div id="id_video" style="width:100%; height:auto; "></div> 
   		<!-- 播放器_弹出 -->
   		<div id="video_tc" class="video_tc" >
   			<div id="video_tc_page" class="video_tc_page">
   				<div class="video_tc_title" id="video_tc_title">提示</div>
   				<div class="video_tc_text"  id="video_tc_text"></div>
   				<div class="video_tc_button"  id="video_tc_button" onclick="video_tc_sure(this);" code="1"></div>
   			</div> 
   	 	 	<div class="video_tc_foot" >
   	 	 		<span id="video_time_long" class="video_time_long">00:00:00</span>
   	 	 		<span id="video_time_stop"  class="video_time_stop">&nbsp;/&nbsp;00:00</span>
   	 	 	</div>
   		</div> 
   </div>
    
    <div id="top_video" ></div>
    
    <div class="notice_box"   id="order_aa" >
			<div class="notice">
				<div class="head">
					<img src="../../../images/vedio/logo.jpg">
				</div>
				<h1>到答课堂丨全年至少100节精品课程</h1>
				<span  onclick="go_dinggou();">订阅</span>
				<div class="clearfix"></div>
			</div>
		</div>
    
    
    
    <div id="discuss_div" style="display: none;">
    
    </div>
    
   <div  style="padding-top:10px;border-top:10px solid #f2f2f2; ">&nbsp;&nbsp;&nbsp;<span style="color:#4CAF50;margin-right: 10px; ">|</span>其他课程</div> 
    <div id="other_video" class="other">
    </div>
  	
  	<br><br><br><br>
  	
  		<div class="menu_style"  id="menu_id"  style="position: fixed; background-color: #fff;z-index: 100;bottom: 0px;">
  	<div class=" menu_css" onclick="go_top();"><img src='../../../img/wx/home-page.png' style="width: 24px;height: 20px;"><br>首页</div>	
  	<div class=" menu_css"  onclick="discuss();"><img src='../../../img/wx/discuss.png' style="width: 24px;height: 20px;"><br>评论</div>		
  	<div class=" menu_css" onclick="go_buy();" id="dy_div" ><img id="dy_img" src='../../../img/wx/order.png' style="width: 24px;height: 20px;"><br>订阅</div>		
  	<div class=" menu_css" onclick="collection();" id="collect_id"><img id="sc_img" src='../../../img/wx/collect.png' style="width: 24px;height: 20px;"><br>收藏</div>
  	</div>
  	
  	 
  	
  	 <div  class="load_tc_back" style="display: none;"  id="myts">
 		 
		<div style="position: fixed;bottom: 0px;left: 0px;width:100%">	 
		<input type="text" placeholder="内容不能超过400个字" maxlength="400" style="width: 100%;height: 100px;"id="val">
		 </div>
		  
		 
		<div  style="position: fixed;bottom: 0px;left: 0px;" >
			 <button class="tc_ts_div_sure" onclick="close_it();">取消</button> 
			 <button class="tc_ts_div_sure2" onclick="sub_discuss();">发表</button>
		</div> 
 	 
 	</div>
  </body>
   <script type="text/javascript" src="../../../js/jquery-2.1.1.min.js"></script> 
  <script type="text/javascript" src="../../../js/path.js?v=1.0"></script>
   <script type="text/javascript">
  var c_no="";
  var top_openid ="";
  $(function() {
	   c_no = Get_String("c_no"); 
	   top_openid = Get_String("share_id");
		if(c_no == null || c_no == ""){
			c_no = localStorage.getItem("c_no");
		 }else{
			 localStorage.setItem("c_no", c_no);
		 }
		
 });  
  
  </script>
  
 <script type="text/javascript" src="../../../js/wx/wx_sq2.js"></script> 
  <script type="text/javascript" src="../../../js/wx/wx_me.js"></script>  
  <script type="text/javascript" src="../../../js/jquery.tips.js"></script>
   <script type="text/javascript" src="../../../js/qq_video/qq_video.js?v=1"></script>
  <script type="text/javascript">
  
 
  var dy = 0;
  var sc = 0;
  var is_free ="";
  
  //var openid="oLir8jsziazLpKT0b6JSSbQ0icR4";
  	
 
  		 
 var watch=localStorage.getItem("watch");
 
	(function ajaxWatch(){
  		$.ajax({
  	  		type:"post",
  	  		url: pt_path +'course/watched.do',
  	  		
  	  		data:{id:c_no},
  	  		dataType:"text"
  	  		
  		});
  		
 })();
	
function Get_String(name) {
    var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)", "i");
    var r = window.location.search.substr(1).match(reg);
    if ( r != null ){
       return unescape(r[2]);
    }else{
       return null;
    } 
}

var share_url = "http://www.daodaketang.com/educate/jsp/wx/course/course_Detail.html?c_no=";
  		 
var share_ul="course_Detail";	 

var share_title_name="";
var share_title_main="";
var share_title_img="";

var get_share_ul=Get_String("share_ul");
  		 
$(function() {
	wx_page_init();
});
  		
  		
function set_top(){
	
	 if(top_openid != null && top_openid != ""){
		 $.ajax({
				type:"post",
				dataType:"json",
				url:pt_path+"top/set_top.do",
				data : {"openid":openid,"top_openid":top_openid,"share_ul":get_share_ul},
				success : function(data){
					
				}
		 });
	 } 
}



$(function(){
		
		if(c_no == null || c_no == ""){
		c_no = localStorage.getItem("c_no");
	 }else{
		 localStorage.setItem("c_no", c_no);
	 }
		$.ajax({
	  		type:"post",
	  		url: pt_path +'/course/course_dt.do',
	  		dataType:"json",
	  		data:{"c_no":c_no,"open_id":openid},
	  		success: function(data){
	  			var course=data[0].course;
	  			
	  			share_title_name=course.c_name;
	  			var str_bule=course.introduce2;
	  			
	  			var str_sharee_img=course.sharee_img;
	  			
	  			
	  				if(str_sharee_img==null ||str_sharee_img==""){
	  					share_title_img="http://www.daodaketang.com/educate/img/logo.jpg";
	  				}else{
	  					
	  					share_title_img=str_sharee_img;
	  				}
	  			
	  			
	  			if(str_bule==null || str_bule==""){
	  				share_title_main="我发现了一些好玩有趣的东西，快来看看吧！";
	  			}else{
	  				
	  				if(str_bule.length>30){
	  					share_title_main=str_bule.substring(0,30);
	  				}else{
	  					share_title_main=str_bule;
	  				}
	  				
	  			}
	  			
	  			
	  			 
	  			var c_obj = {"continue_time":20,"title":"提示","text":"已经看了一部分！","button":"继续播放"};
	  			
	  			var s_obj = {"stop_time":30,"title":"提示","text":"试看结束，请订阅！","button":"确定"};
	  			
	  			var e_obj ={"title":"提示","text":"播放结束，请答卷！","button":"确定"};
	  			
	  			this_vid = course.url;
			 
	  			video_init(course.url,"1253819261",null,null,s_obj,null);	
	  		}
		
		});
	});



function wx_page_init(){
	 
	if(openid != null && openid!="null" && openid!=""){
	
  		/* 	var c_obj = {"continue_time":20,"title":"提示","text":"已经看了一部分！","button":"继续播放"};
  			
  			var s_obj = {"stop_time":30,"title":"提示","text":"试看结束，请订阅！","button":"确定"};
  			
  			var e_obj ={"title":"提示","text":"播放结束，请答卷！","button":"确定"}; */
  			
  			//视频的防盗链接  使用是  视频的id 与appid 传 null
  			//var video_url = "http://1253790856.vod2.myqcloud.com/e985cdd5vodtransgzp1253790856/e0dc21e79031868222951683144/f0.f20.mp4?sign=xxxxxx&t=55bb9b80";
  			//var varr = [];
  			//varr.push();
  			//视频id ,appid,防盗链接数组，继续播放设置，试看播放设置，播放结束设置
  	 
  	var a=""; var b="";  
  			
  		$.ajax({
  		type:"post",
  		url: pt_path +'/course/course_detail.do',
  		dataType:"json",
  		data:{"c_no":c_no,"watch":watch,"open_id":openid},
  		success: function(data){
  			
  			// alert(data[0].dy);
  			
  			dy = data[0].dy;
  			sc = data[0].sc;
  			
  			if(data[0].user.role == 1){
  				dy =1;
  			}
  			
  			if(dy > 0){
  				$("#dy_img").attr("src",pt_path+"/img/wx/dy2.png");
  				$("#dy_div").css("color","#2dc158");
  			}else{
  				$("#dy_img").attr("src",pt_path+"/img/wx/order.png");
  				$("#dy_div").css("color","#333333");
  			} 
  			
  			if(sc > 0){
  				$("#sc_img").attr("src",pt_path+"/img/wx/sc2.png");
  				$("#collect_id").css("color","#2dc158");
  			}else{
  				$("#sc_img").attr("src",pt_path+"/img/wx/collect.png");
  				$("#collect_id").css("color","#333333");
  			}
  			
  			var course=data[0].course;
  			
  			is_free = data[0].course.is_free;
  			
  			var course_list=data[0].course_list;
  			var course_order=data[0].course_order;
  			 var user=data[0].user;
  			 
  			 var tt = course.text;
				
  			var html="";
  				var html2="";     var zz=""; var zzz=""; 
  				
					/* this_vid = course.url;
  				
  				video_init(course.url,"1253819261",null,null,s_obj,null);	 */
  				
  			
  			
  				if(user.role==0&&user.state==0){
  					for(var i=0;i<course_list.length;i++){  			
  			  			if(c_no==course_list[i].c_no&&course_list[i].is_show==1){
  			  				
  			  			if(course.c_name.length>=8){
  							
  							name_size="<div class='title'>"+course.c_name.substring(0,8)+"...</div>";
  						}else{
  							
  						name_size="<div class='title'>"+course.c_name+"</div>";
  						} 
  			  				
  			  				
  			  					
  			  					html+="<div class='cont' cno='"+course.c_no+"' watch='"+course.watch+"' style='border-bottom:10px solid #f2f2f2;'>"		
  					  				+"<div class='detail'>"
  					  				+""+name_size+""	
  					  				+"<h1 id='a_id' onclick='zhanka(this);' val='"+course.text+"' val2='"+course+"'>课程详情</h1>"
  					  				/* +"<div class='arrow'>"	
  					  				+"<img src='../../../images/vedio/arrow.png'></div>" */		
  					  				+"<div class='clearfix'></div></div>"	
  					  			+"<p id='go_kai'>"+tt+"</p></div>";	
  					  				
  			  					$("#top_video").html(html); 
  			  				}else if(course_list[i].type==1&&course_list[i].is_show==1){
  			  					if(course_list[i].isBuy!=1&&course_list[i].is_free==1){
  			  							 
  				  						zz="<div class='price'>￥"+toDecimal2(course_list[i].price/100)+"/年</div>";
  				  						zzz="<div class='doc'>主讲："+course_list[i].teacher+"</div>";
  			  						
  										 }else if(course_list[i].isBuy==1){
  										 
  			  	  						zz="<div class='price'>开始学习</div>";
  			  	  						zzz="<div class='doc'>主讲："+course_list[i].teacher+"</div>";
  										
  										 }else if(course_list[i].is_free==-1){
  										
  										 
  			  	  						zz="<div class='price'>限时免费</div>";
  			  	  						zzz="<div class='doc'>主讲："+course_list[i].teacher+"</div>";
  									}
  			  					if(course_list[i].is_xin==1){
  			  						a="<div class='list'>新</div>";
  			  						}	
  								if(course_list[i].type==1){
  									b="<div class='icon' style='background:url(../../../images/hot/video.png) no-repeat;background-size:100%;'></div>";
  										
  								}else{
  									b="<div class='icon' style='background:url(../../../images/hot/audio.png) no-repeat;background-size:100%;'></div>";
  										}
  			  					 
  									
  								if(course_list[i].c_name.length>=8){
  									
  									name_size="<div class='b_title'>"+course_list[i].c_name.substring(0,8)+"...</div>";
  								}else{
  									
  								name_size="<div class='b_title'>"+course_list[i].c_name+"</div>";
  								}
  								
  								html2+="<div class='column2' onclick='detail(this);' cno='"+course_list[i].c_no+"' watch='"+course_list[i].watch+"' >"
  								+"<div class='b_bg'>"
  								+"<img src='"+course_list[i].img+"'>"
  								+""+a+""
  								+""+b+""
  								+"</div>"
  								+"<div class='b_text'   >"
  								+""+name_size+""						 	
  								+"<div class='clearfix'></div>"	
  								+""+zz+""
  								+""+zzz+""
  								+"<div class='mes'>"								 
  								+"<div class='view1'><img src='../../../images/hot/time.png'></div>"	
  								+"<div class='b_numb'>"+course_list[i].date.substring(0,10)+"</div>"		
  								+"<div class='view2'>"	
  								+"<img src='../../../images/hot/view.png'></div>"	
  								+"<div class='b_numb'>"+course_list[i].watch+"</div>"	
  								+"<div class='clearfix'></div></div></div>"		
  								+"<div class='clearfix'></div></div>";																																																																						
  			  				}	
  			  			}$("#other_video").html(html2);
  				}else if(user.role==1&&user.state==0){
  		  			
  						$("#order_aa").hide();
  						
  						//console.log("-----------"); 
  					
  		  			var html="";
  		  			var html2="";
  		  			
		  		  			if(course.c_name.length>=8){
								
								name_size="<div class='title'>"+course.c_name.substring(0,8)+"...</div>";
							}else{
								
							name_size="<div class='title'>"+course.c_name+"</div>";
							} 
				  				 
		  					
		  					html+="<div class='cont' cno='"+course.c_no+"' watch='"+course.watch+"' style='border-bottom:10px solid #f2f2f2;'>"		
				  				+"<div class='detail'>"
				  				+""+name_size+""	
				  				+"<h1 id='a_id' onclick='zhanka(this);' val='"+course.text+"' val2='"+course+"'>课程详情</h1>"
				  				/* +"<div class='arrow'>"	
				  				+"<img src='../../../images/vedio/arrow.png'></div>" */		
				  				+"<div class='clearfix'></div></div>"	
				  			+"<p id='go_kai'>"+tt+"</p></div>";	
				  				
		  					$("#top_video").html(html);
  		  			
  		  			
  		  				for(var i=0; i<course_list.length;i++){
  		  					 
  		  						var introduce= "";
  		  				 
  		  						if(course_list[i].introduce!= null){
  		  					
	  		  						if(course_list[i].introduce.length>12){
	  		  							introduce=course_list[i].introduce.substring(0,12)+"...";
	  		  							 
	  		  						}
  		  						} 
  		  						
  		  						
  		  				   if(course_list[i].state==1&&course_list[i].type==1&&course_list[i].is_show==1){
  		  					
  		  					if(course_list[i].is_xin==1){
  		  							a="<div class='list'>新</div>";
  		  						}	
  		  						if(course_list[i].type==1){
  		  							b="<div class='icon' style='background:url(../../../images/hot/video.png) no-repeat;background-size:100%;'></div>";
  		  							
  		  						}else{    
  		  							 
  		  						b="<div class='icon' style='background:url(../../../images/hot/audio.png) no-repeat;background-size:100%;'></div>";
  	  							
  		  						}
  		  						
  		  						if(course_list[i].c_name.length>=8){
									
									name_size="<div class='b_title'>"+course_list[i].c_name.substring(0,8)+"...</div>";
								}else{
									
								name_size="<div class='b_title'>"+course_list[i].c_name+"</div>";
								}
  		  						
  								html2+="<div class='column2' onclick='af(this);' cno='"+course_list[i].c_no+"' watch='"+course_list[i].watch+"' >"
  								+"<div class='b_bg'>"
  								+"<img src='"+course_list[i].img+"'>"
  								+""+a+""
  								+""+b+""
  								+"</div>"
  								+"<div class='b_text'   >"
  								+"<div class='b_title'>"
  								+name_size 	
  								//+"<span style='background:#2dc158; float:right;'>已购买</span>"
  								+"<div class='clearfix'></div></div>"	
  								+"<div class='price'>开始学习</div>"
  								+"<div class='doc'>主讲："+course_list[i].teacher+"</div>"
  								+"<div class='mes'>"								 
  								+"<div class='view1'><img src='../../../images/hot/time.png'></div>"	
  								+"<div class='b_numb'>"+course_list[i].date.substring(0,10)+"</div>"		
  								+"<div class='view2'>"	
  								+"<img src='../../../images/hot/view.png'></div>"	
  								+"<div class='b_numb'>"+course_list[i].watch+"</div>"	
  								+"<div class='clearfix'></div></div></div>"		
  								+"<div class='clearfix'></div></div>";
  		  					
  		  				}
  		  			}$("#other_video").html(html2);
  		  		}else if(user.role==3&&user.state==0){
  		  			
  		  		
  		  				
  					for(var i=0;i<course_list.length;i++){  
  						 
  			  			if(c_no==course_list[i].c_no&&course_list[i].is_show==1){
  			  				
  			  				if(course.c_name.length>=8){
								
								name_size="<div class='title'>"+course.c_name.substring(0,8)+"...</div>";
							}else{
								
							name_size="<div class='title'>"+course.c_name+"</div>";
							}
  			  				
  			  				
  			  				
  			  					html+="<div class='cont' cno='"+course.c_no+"' watch='"+course.watch+"' style='border-bottom:10px solid #f2f2f2;'>"		
  					  				+"<div class='detail'>"
  					  				+""+name_size+""	
  					  				+"<h1 id='a_id' onclick='zhanka(this);' val='"+course.text+"' val2='"+course+"'>课程详情</h1>"
  					  				/* +"<div class='arrow'>"	
  					  				+"<img src='../../../images/vedio/arrow.png'></div>" */		
  					  				+"<div class='clearfix'></div></div>"	
  					  				+"<p id='go_kai'>"+tt+"</p></div>";	
  					  				
  					  				
  					  				
  			  					$("#top_video").html(html); 
  			  				}else if(course_list[i].type==1&&course_list[i].is_show==1){
  			  					if(course_list[i].isBuy!=1&&course_list[i].is_free==1){
  			  							 
  				  						zz="<div class='price'>￥"+toDecimal2(course_list[i].price/100)+"/年</div>";
  				  						zzz="<div class='doc'>主讲："+course_list[i].teacher+"</div>";
  			  						
  										 }else if(course_list[i].isBuy==1){
  										 
  			  	  						zz="<div class='price'>开始学习</div>";
  			  	  						zzz="<div class='doc'>主讲："+course_list[i].teacher+"</div>";
  										
  										 }else if(course_list[i].is_free==-1){
  										
  										 
  			  	  						zz="<div class='price'>限时免费</div>";
  			  	  						zzz="<div class='doc'>主讲："+course_list[i].teacher+"</div>";
  									}
  			  					if(course_list[i].is_xin==1){
  			  						a="<div class='list'>新</div>";
  			  						}	
  								if(course_list[i].type==1){
  									b="<div class='icon' style='background:url(../../../images/hot/video.png) no-repeat;background-size:100%;'></div>";
  										
  								}else{
  									b="<div class='icon' style='background:url(../../../images/hot/audio.png) no-repeat;background-size:100%;'></div>";
  										}
  								
									if(course_list[i].c_name.length>=8){
  									
  									name_size="<div class='b_title'>"+course_list[i].c_name.substring(0,8)+"...</div>";
  								}else{
  									
  								name_size="<div class='b_title'>"+course_list[i].c_name+"</div>";
  								}
  			  					 
  								html2+="<div class='column2' onclick='detail(this);' cno='"+course_list[i].c_no+"' watch='"+course_list[i].watch+"' >"
  								+"<div class='b_bg'>"
  								+"<img src='"+course_list[i].img+"'>"
  								+""+a+""
  								+""+b+""
  								+"</div>"
  								+"<div class='b_text'   >"
  								+""+name_size+""						 	
  								+"<div class='clearfix'></div>"	
  								+""+zz+""
  								+""+zzz+""
  								+"<div class='mes'>"								 
  								+"<div class='view1'><img src='../../../images/hot/time.png'></div>"	
  								+"<div class='b_numb'>"+course_list[i].date.substring(0,10)+"</div>"		
  								+"<div class='view2'>"	
  								+"<img src='../../../images/hot/view.png'></div>"	
  								+"<div class='b_numb'>"+course_list[i].watch+"</div>"	
  								+"<div class='clearfix'></div></div></div>"		
  								+"<div class='clearfix'></div></div>";																																																																						
  			  				}	
  			  			}$("#other_video").html(html2);
  				}
  		  			
  		  		 
  			
  		}
	
  });
  		set_top();
	}
  		
}
  		
 var is_zk =1;
  	function zhanka(obj){
  		 
  		var text=$(obj).attr("val");
  		   
  		if(is_zk ==0){
  			$("#a_id").html("收起详情");
  			
  			$("#go_kai").html("<div style='padding:2% 2%;color:#9F9F9F;'>"+text+"</div>");
  			
  			is_zk = 1;
  		}else{
  			$("#a_id").text("课程详情");
  			if(text.length > 10){
  				text = text.substring(0,10)+"...";
			} 
  			$("#go_kai").html("<div style='padding:2% 2%;color:#9F9F9F;'>"+text+"</div>");
  			
  			is_zk = 0;
  		}	
  	}
  
function collection(){
  		
  		//var c_no=localStorage.getItem("c_no");
  		
  		//var c_no = "1496751765924";
  		 
  		
  		if(sc == 0){
  			 
  			$.ajax({ 
  		  		type:"post",
  		  		url: pt_path +'/course/course_collection.do',
  		  		dataType:"json",
  		  		data:{"c_no":c_no,"open_id":openid}, 
  		  		success: function(data){
  		  		 
  		  			sc = 1;
  	  				$("#sc_img").attr("src",pt_path+"/img/wx/sc2.png");
  	  				$("#collect_id").css("color","#2dc158");
  		  		}
  		  	});
  		}else{
  			
  			
  			
  			$.ajax({ 
  		  		type:"post",
  		  		url: pt_path +'/top/delete_collection.do',
  		  		dataType:"json",
  		  		data:{"c_no":c_no,"openid":openid}, 
  		  		success: function(data){
  		  			
  		  			sc = 0; 
  	  				$("#sc_img").attr("src",pt_path+"/img/wx/collect.png"); 
  	  				$("#collect_id").css("color","#333333");
  		  		}
  		  	});
  		} 
}
  	 
  	 function detail(obj){
  		  
  	 	var c_no=$(obj).attr("cno");
  	  	var watch=$(obj).attr("watch");
  		localStorage.setItem("c_no", c_no );
  	
  		 $.ajax({
  	  		type:"post",
  	  		url: pt_path +'/course/course_detail.do',
  	  		dataType:"json",
  	  		data:{"c_no":c_no,"watch":watch,"open_id":openid},
  	  		success: function(data){
  	  		localStorage.setItem("watch", watch );
  	  			
  	  	dy = data[0].dy;
    	  is_free = data[0].course.is_free;
  			if(data[0].user.role == 1){
  				dy =1;
  				
  				$("#order_aa").hide();
  			}
  			if(dy > 0 ||is_free==-1){
  				window.location.href=pt_path+'jsp/wx/course/buy_course.html';
  			}else{
  				window.location.href=pt_path+'jsp/wx/course/course_Detail.html';
  			} 
  			
  	  			
  	  			}
  	  		});
  		 		
  	 }
  	 
  	function ts_show(msg){
	
	$("#ts_msg").html(msg);
	$("#myts").show();
}
  	function close_it(){
  		var change2=document.getElementById("discuss_div");
		 if (change2.style.display == "inline") {
			 change2.style.display = "none";
	        }
  		$("#myts").hide();
  	}

	function discuss(){
		
		
		var c_no1=localStorage.getItem("c_no");
		
		localStorage.setItem("c_no", c_no1);
		 
		location.href = pt_path +"/jsp/wx/art/comment.html"; 
  
	}
	
	function sub_discuss(){
				
			
		var val=$("#val").val();
		//var c_no=localStorage.getItem("c_no");
		 
			$.ajax({
	  		type:"post",
	  		url: pt_path +'/course/course_discuss.do',
	  		dataType:"json",
	  		data:{"c_no":c_no,"open_id":openid,"val":val},
	  		
	  		success: function(data){
	  			if("success"==data[0].result) 	{
	  				
	  				var change2=document.getElementById("discuss_div");
	  				 if (change2.style.display == "inline") {
	  					 change2.style.display = "none";
	  					 
	  					  
	  					$("#myts").hide();
	  			      }
	  			}	
	  		}
	  	});
		
	}
	
	
	 function go_order() {
		// var c_no=localStorage.getItem("c_no");
 		  
 			$.ajax({
 		  		type:"post",
 		  		url: pt_path +'/course/pay_money.do',
 		  		dataType:"json",
 		  		data:{"c_no":c_no,"open_id":openid},
 		  		
 		  		success: function(data){
 		  			if("success"==data[0].result) 	{
 	 
 		  				alert("购买成功");
 		  					 
 		  			       
 		  			}else if("is_have"==data[0].result){
 		  				
 		  				alert("已经购买过");
 		  			}	
 		  		}
 		  	});
	}
	 
	 function go_dinggou(){
		window.location.href=pt_path+'jsp/wx/Guyang/dinggou.html'; 
		 
	 }
	 
	 function go_buy(){
		 var c_no1 = localStorage.getItem("c_no");
		 
		 if(is_free =="-1"){
			 alert("限时免费的课程暂时无法购买，喜欢的话可以先收藏");
		 }
		 
		 //localStorage.setItem("c_no", c_no);
		 	if(dy < 1 && is_free =="1"){
		 		window.location.href=pt_path+"wxpay/into_buy.do?c_no="+c_no1+"&openid="+openid+"&kind=1"; 
		 	}
			
			 
		 }
	
	 
	 function video_stop_event(){
		var c_no1 = localStorage.getItem("c_no");
		if(dy < 1 && is_free =="1"){
			 window.location.href=pt_path+"wxpay/into_buy.do?c_no="+c_no1+"&openid="+openid+"&kind=1"; 
		}
		
		 
	}

 function video_end_event(){
			
	alert("点击了视频播放结束结束！");
} 
		 
 function add_study(see_time,is_end){
		
	// var c_no=localStorage.getItem("c_no");
	 var is_buy = 0; // 0 未购买  1已购买
	 if(dy > 0){
		 is_buy = 1;
	 }
	  
		 $.ajax({
				type:"post",
				url: pt_path +"/study/add_study.do",
				dataType:"json",
				data:{"see_time":parseInt(see_time) ,"is_end":is_end,"openid":openid,"c_no":c_no,"is_buy":is_buy,"type":1},
				success: function(data){
					
				}
		 });
	}
 
 function go_top(){
	 
	 window.location.href=pt_path+'jsp/pt/a_edit/show/1495714795.html'; 
	 
 }
 
 function toDecimal2(x) {    
	    var f = parseFloat(x);    
	    if (isNaN(f)) {    
	        return false;    
	    }    
	    var f = Math.round(x*100)/100;    
	    var s = f.toString();    
	    var rs = s.indexOf('.');    
	    if (rs < 0) {    
	        rs = s.length;    
	        s += '.';    
	    }    
	    while (s.length <= rs + 2) {    
	        s += '0';    
	    }    
	    return s;    
	}
 
	/* myVid=document.getElementById("video1");
	myVid.addEventListener('ended',function(){
	        window.location.href=pt_path+'jsp/wx/exercise/exercise.html';;
	    }); */
  </script>
</html>
